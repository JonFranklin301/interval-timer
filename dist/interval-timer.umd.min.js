/* Interval-Timer v1.1.1
Author: Jon Franklin
License: MIT */
(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a="undefined"==typeof globalThis?a||self:globalThis,b(a.intervalTimer={}))})(this,function(a){'use strict';function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(){return"undefined"!=typeof document}function f(){return h}function g(a,b,c){return"undefined"==typeof b?a:c?(a+b).slice(-a.length):(b+a).substring(0,a.length)}var h="undefined"!=typeof module&&module.exports&&"function"==typeof require?require("events"):void 0,i=function(){function a(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};b(this,a),this.startTime=0,this.endTime=null,this.updateFrequency=100,this.selfAdjust=!0,this.countdown=!1,this.animationFrame=!1,this._timer,this._startTime=0,this._timeAtStart=0,this._currentTime=0,this._expected=0,this._drift=0,this._isRunning=!1,this._isPaused=!1,this._eventEmitter=e()?document.createElement("span"):f()?new h.EventEmitter:void 0,this.on=this.addEventListener,this.off=this.removeEventListener,Object.assign(this,c)}return d(a,[{key:"_instance",value:function(){var a=Math.max,b=this;return this._isRunning=!0,this._currentTime=this.countdown?this._timeAtStart-new Date+this._startTime:new Date-this._timeAtStart+this._startTime,this.selfAdjust&&!this.animationFrame&&(this._drift=this.countdown?this._expected-this._currentTime:this._currentTime-this._expected),(this.countdown?null!==this.endTime&&this._currentTime<=this.endTime||0>=this._currentTime:null!==this.endTime&&this._currentTime>=this.endTime)?(this._currentTime=this.endTime,this._isRunning=!1,this.dispatchEvent("update",this),void this.dispatchEvent("end",this)):void(this.dispatchEvent("update",this),this.countdown?this._expected-=this.updateFrequency:this._expected+=this.updateFrequency,this._timer=this.animationFrame?requestAnimationFrame(function(){return b._instance()}):setTimeout(function(){return b._instance()},this.selfAdjust?a(0,this.updateFrequency-this._drift):this.updateFrequency))}},{key:"start",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this._isRunning?void 0:this._isPaused?(this._isPaused=!1,this._timeAtStart=new Date().getTime(),this._startTime=this._currentTime,this._expected=this._startTime,this.dispatchEvent("start",this),void this._instance()):void(Object.assign(this,a),this._timeAtStart=new Date().getTime(),this._startTime=this.startTime,this._currentTime=this.startTime,this._expected=this.startTime,this.dispatchEvent("start",this),this._instance())}},{key:"stop",value:function(){!this._isRunning||this._isPaused||(this._isRunning=!1,this._isPaused=!1,this.animationFrame?cancelAnimationFrame(this._timer):clearTimeout(this._timer),this.dispatchEvent("stop",this))}},{key:"pause",value:function(){!this._isRunning||this._isPaused||(this._isRunning=!1,this._isPaused=!0,this.animationFrame?cancelAnimationFrame(this._timer):clearTimeout(this._timer),this.dispatchEvent("pause",this))}},{key:"reset",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.stop(),this._isRunning=!1,this._isPaused=!1,Object.assign(this,a),this._currentTime=this.startTime,this._expected=this.startTime,this.dispatchEvent("update",this),this.dispatchEvent("reset",this)}},{key:"adjustTime",value:function(a){!this._isRunning||this._isPaused||(this._expected+=a,this._startTime+=a)}},{key:"addEventListener",value:function(a,b){e()?this._eventEmitter.addEventListener(a,b):f()&&this._eventEmitter.on(a,b)}},{key:"removeEventListener",value:function(a,b){e()?this._eventEmitter.removeEventListener(a,b):f()&&this._eventEmitter.removeListener(a,b)}},{key:"dispatchEvent",value:function(a,b){e()?this._eventEmitter.dispatchEvent(new CustomEvent(a,{detail:b})):f()&&this._eventEmitter.emit(a,b)}},{key:"getTime",get:function(){var a=Math.floor;return{milliseconds:a(this._currentTime%1e3),millisecondsTotal:a(this._currentTime),hundredths:a((this._currentTime%1e3/10).toFixed(0)),hundredthsTotal:a((this._currentTime/10).toFixed(0)),tenths:a((this._currentTime%1e3/100).toFixed(0)),tenthsTotal:a((this._currentTime%1e3).toFixed(0)),seconds:a(this._currentTime/1e3%60),secondsTotal:a(this._currentTime/1e3),minutes:a(this._currentTime/1e3/60%60),minutesTotal:a(this._currentTime/1e3/60),hours:a(this._currentTime/1e3/60/60%24),hoursTotal:a(this._currentTime/1e3/60/60),days:a(this._currentTime/1e3/60/60/24),daysTotal:a(this._currentTime/1e3/60/60/24)}}},{key:"isRunning",get:function(){return this._isRunning}},{key:"isPaused",get:function(){return this._isPaused}}]),a}();a.Timer=i,a.pad=g,Object.defineProperty(a,"__esModule",{value:!0})});
